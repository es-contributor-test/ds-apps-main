---
/**
 * Shared Timeline component for displaying project roadmap
 * Used on: Home page, /stack page
 */
import type { Project } from '../lib/projects'

interface Props {
  inProgressProjects: Project[]
  upcomingProjects: Project[]
  title?: string
  showTags?: boolean
}

const { 
  inProgressProjects, 
  upcomingProjects, 
  title = "What's Next",
  showTags = true 
} = Astro.props
---

{(inProgressProjects.length > 0 || upcomingProjects.length > 0) && (
  <section>
    {title && <h3 class='mb-4 text-lg font-semibold text-foreground'>{title}</h3>}
    <div class='relative ml-3 border-l-2 border-border pl-6'>
      {/* In Progress Projects */}
      {inProgressProjects.map((project) => (
        <div class='relative pb-6'>
          {/* Amber dot for in-progress */}
          <div class='absolute -left-[31px] flex h-4 w-4 items-center justify-center rounded-full border-2 border-amber-500 bg-background'>
            <div class='h-2 w-2 rounded-full bg-amber-500'></div>
          </div>
          <div class='space-y-1'>
            <div class='flex items-center gap-2'>
              <span class='text-xs font-medium uppercase tracking-wide text-amber-600 dark:text-amber-400'>In Progress</span>
            </div>
            <h4 class='font-semibold text-foreground'>{project.name}</h4>
            <p class='text-sm text-muted-foreground'>{project.shortDescription}</p>
            {showTags && (
              <div class='flex flex-wrap gap-1.5 pt-1'>
                {project.tags.map((tag) => (
                  <span class='rounded bg-amber-100 px-1.5 py-0.5 text-xs text-amber-700 dark:bg-amber-500/20 dark:text-amber-300'>{tag.name}</span>
                ))}
              </div>
            )}
          </div>
        </div>
      ))}
      {/* Coming Soon Projects */}
      {upcomingProjects.map((project, index) => (
        <div class={`relative ${index < upcomingProjects.length - 1 ? 'pb-6' : ''}`}>
          {/* Gray dot for coming-soon */}
          <div class='absolute -left-[31px] flex h-4 w-4 items-center justify-center rounded-full border-2 border-gray-300 bg-background dark:border-gray-600'>
            <div class='h-2 w-2 rounded-full bg-gray-300 dark:bg-gray-600'></div>
          </div>
          <div class='space-y-1 opacity-75'>
            <div class='flex items-center gap-2'>
              <span class='text-xs font-medium uppercase tracking-wide text-muted-foreground'>Coming Soon</span>
            </div>
            <h4 class='font-medium text-foreground'>{project.name}</h4>
            <p class='text-sm text-muted-foreground'>{project.shortDescription}</p>
            {showTags && (
              <div class='flex flex-wrap gap-1.5 pt-1'>
                {project.tags.map((tag) => (
                  <span class='rounded bg-gray-100 px-1.5 py-0.5 text-xs text-gray-600 dark:bg-gray-500/20 dark:text-gray-400'>{tag.name}</span>
                ))}
              </div>
            )}
          </div>
        </div>
      ))}
    </div>
  </section>
)}
