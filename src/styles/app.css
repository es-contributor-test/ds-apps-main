/* app.css */

/* Fonts - Playfair Display for headings, Lato for body */
@import url('https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	:root {
		--background: 0 0% 100%;  /* Pure white */
		--foreground: 240 10% 1%;
		--card: 0 0% 100%;
		--card-foreground: 240 10% 3.9%;
		--popover: 0 0% 100%;
		--popover-foreground: 240 10% 3.9%;
		--primary: 240 5.9% 10%;
		--primary-foreground: 0 0% 98%;
		--secondary: 240 4.8% 95.9%;
		--secondary-foreground: 240 5.9% 10%;
		--muted: 240 4.8% 95.9%;
		--muted-foreground: 240 3.8% 20%;
		--accent: 240 4.8% 95.9%
		--accent-foreground: 240 5.9% 10%;
		--destructive: 0 72.22% 50.59%;
		--destructive-foreground: 0 0% 98%;
		--border: 240 5.9% 90%;
		--input: 240 5.9% 90%;
		--ring: 240 5.9% 10%;
		--radius: 0.5rem;
	}
	.dark {
		--background: 240 10% 3.9%;
		--foreground: 0 0% 98%;
		--card: 240 10% 3.9%;
		--card-foreground: 0 0% 98%;
		--popover: 240 10% 3.9%;
		--popover-foreground: 0 0% 98%;
		--primary: 0 0% 98%;
		--primary-foreground: 240 5.9% 10%;
		--secondary: 240 3.7% 15.9%;
		--secondary-foreground: 0 0% 98%;
		--muted: 240 3.7% 15.9%;
		--muted-foreground: 240 5% 72%;
		--accent: 240 3.7% 15.9%;
		--accent-foreground: 0 0% 98%;
		--destructive: 0 62.8% 30.6%;
		--destructive-foreground: 0 0% 98%;
		--border: 240 3.7% 15.9%;
		--input: 240 3.7% 15.9%;
		--ring: 240 4.9% 83.9%;
	}
}

@layer base {
	* {
		@apply border-border;
	}
	body {
		@apply bg-background text-foreground;
	}
	/* Serif headings site-wide */
	h1, h2, h3, h4, h5, h6 {
		@apply font-serif;
	}
	/* Restore list styles */
	ol {
		list-style: decimal;
		padding-left: 2.5rem;
	}
	ul {
		list-style: disc;
		padding-left: 2.5rem;
	}
}

/* Letter Grid - Cool minimal design */
.letter {
	@apply flex items-center justify-center rounded-lg border-2 border-primary bg-primary/5 text-center font-mono font-bold text-primary transition-all duration-200 hover:bg-primary/20 hover:shadow-md;
	min-width: 40px;
	min-height: 40px;
	font-size: 1.1rem;
}

.letter:hover {
	@apply scale-105 cursor-default;
}

/* Simulator animations */
@keyframes shake {
	0%, 100% { transform: translateX(0); }
	10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
	20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.shake-animate {
	animation: shake 0.5s ease-in-out;
	border-color: hsl(0, 72.22%, 50.59%) !important;
}

/* Memorize guidance pill */
.memorize-pill {
	@apply rounded-xl border border-slate-200 bg-white/90 px-4 py-2.5 shadow-sm transition-all duration-300 dark:border-slate-700 dark:bg-slate-900/80;
}

.memorize-pill[data-state='memorizing'] {
	@apply border-red-300 bg-red-50 dark:border-red-500/50 dark:bg-red-500/10;
}

.memorize-pill[data-state='hunting'] {
	@apply border-emerald-300 bg-emerald-50 dark:border-emerald-500/50 dark:bg-emerald-500/10;
}

.memorize-countdown {
	@apply inline-flex min-w-[56px] items-center justify-center rounded-xl bg-amber-100 px-3 py-2 text-xl font-bold tabular-nums text-amber-700 shadow-sm dark:bg-amber-500/20 dark:text-amber-200;
}

.memorize-pill[data-state='memorizing'] .memorize-countdown {
	@apply bg-red-100 text-red-700 ring-2 ring-red-200 dark:bg-red-500/20 dark:text-red-200 dark:ring-red-500/40;
}

.memorize-pill[data-state='hunting'] .memorize-countdown {
	@apply bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-100;
}

/* Pineapple progress */
.pineapple-progress {
	@apply rounded-3xl border border-slate-200 bg-white/90 p-4 shadow-sm transition-all duration-300 dark:border-slate-800 dark:bg-slate-900/80;
}


.pineapple-progress-track {
	@apply relative mt-3 h-14 w-full rounded-2xl border border-slate-200 bg-slate-50/80 dark:border-slate-700 dark:bg-slate-800/60;
	overflow: hidden;
}

.pineapple-progress-fill {
	@apply absolute inset-y-1 left-1 rounded-2xl bg-gradient-to-r from-amber-200 via-amber-300 to-emerald-200 shadow-inner transition-all duration-500 ease-out;
	width: 0%;
}

.pineapple-progress-slots {
	@apply relative z-10 flex h-full w-full items-center justify-between px-4;
}

.pineapple-slot {
	@apply relative flex h-10 w-10 items-center justify-center rounded-xl border border-slate-200 bg-white text-2xl text-slate-400 transition-all duration-300 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-500;
}

.pineapple-slot span {
	display: inline-block;
	transition: transform 0.35s ease, opacity 0.35s ease;
	opacity: 0.2;
	transform: scale(0.65);
}

.pineapple-slot::after {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	box-shadow: 0 0 0 rgba(251, 191, 36, 0);
	transition: box-shadow 0.4s ease;
}

.pineapple-slot.is-active {
	@apply border-amber-300 bg-amber-50 text-amber-500 shadow-[0_12px_20px_rgba(251,191,36,0.25)] dark:bg-amber-500/10;
}

.pineapple-slot.is-complete {
	@apply border-emerald-400 bg-emerald-100 text-emerald-700 shadow-[0_18px_28px_rgba(16,185,129,0.35)] dark:border-emerald-500/60 dark:bg-emerald-500/10 dark:text-emerald-100;
}

.pineapple-slot.is-complete span {
	opacity: 1;
	transform: scale(1);
}

.pineapple-slot.is-complete::after {
	box-shadow: 0 0 25px rgba(16, 185, 129, 0.45);
}

.pineapple-slot.is-missed {
	@apply border-red-400 bg-red-50 text-red-600 dark:bg-red-500/10 dark:text-red-200;
}

.pineapple-progress.success {
	@apply ring-2 ring-emerald-300 shadow-[0_20px_45px_rgba(16,185,129,0.35)];
}

.pineapple-progress.fail {
	@apply ring-2 ring-red-200;
}

.pineapple-progress.fail .pineapple-progress-track {
	animation: shake 0.6s ease-in-out;
}

@keyframes pineapplePop {
	0% { transform: scale(0.6) rotate(-10deg); opacity: 0; }
	70% { transform: scale(1.15) rotate(8deg); opacity: 1; }
	100% { transform: scale(1) rotate(0deg); opacity: 1; }
}

.pineapple-slot.pop {
	animation: pineapplePop 320ms ease-out;
}

.pineapple-stats {
	@apply mt-3 flex items-center gap-3 rounded-2xl border border-slate-200 bg-white/90 px-4 py-2 text-sm text-slate-600 transition-all duration-300 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-300;
	opacity: 0;
	transform: translateY(6px);
	pointer-events: none;
}

.pineapple-stats.is-visible {
	opacity: 1;
	transform: translateY(0);
	pointer-events: auto;
}

.pineapple-stats .label {
	@apply text-[11px] uppercase tracking-[0.3em] text-slate-400;
}

.pineapple-stats .value {
	@apply font-mono text-base font-semibold text-slate-800 dark:text-white;
}

.pineapple-stats-divider {
	@apply h-8 w-px bg-slate-200 dark:bg-slate-700;
}

.pineapple-stats-pill {
	@apply ml-auto inline-flex items-center gap-1.5 rounded-lg bg-emerald-500 px-3 py-1.5 text-xs font-bold text-white shadow-sm;
	display: none;
}

.pineapple-stats-pill.is-visible {
	display: inline-flex;
}

@keyframes gridPulse {
	0% {
		box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.15);
	}
	70% {
		box-shadow: 0 0 0 18px rgba(0, 0, 0, 0);
	}
	100% {
		box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
	}
}

.grid-live {
	@apply border-foreground/50 shadow-[0_0_35px_rgba(0,0,0,0.15)];
	animation: gridPulse 1.3s ease-in-out infinite;
}